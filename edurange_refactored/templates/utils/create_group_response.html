<!-- Response template to create all necessary elements for group creation AJAX response -->

{% with messages = get_flashed_messages(with_categories=true) %} {% if messages %}
<div class="col mb-0" id="flashed">
    {% for category, message in messages %}
    <div class="alert alert-{{ category }} mb-0">
        <a class="close" title="Close" href="#" data-dismiss="alert">&times;</a>
            {{ message }}
    </div><!-- end .alert -->
    {% endfor %}
</div><!-- end col -->
{% endif %} {% endwith %}

<button class="btn btn-dark btn-sm ml-2 mb-2" type="button" data-toggle="collapse"
        data-target="#{{ group.name.replace(' ', '') }}-table" aria-expanded="false"
        aria-controls="{{ group.name.replace(' ', '') }}-table">
    {{ group.name }} <i class="fa fa-caret-down"></i>
</button>

<div id="{{ group.name.replace(' ', '') }}-table" class="collapse" aria-labelledby="headingUsers" data-parent="#groupTables">
    <p></p>
    <div>
        <div class="row mb-3 mr-3">
            <h4 class="ml-3"> {{ group.name }} &emsp;&emsp;|&emsp;&emsp;
                Registration Code: <i>{{ group.code }}</i> &emsp;&emsp;|&emsp;&emsp;
                Size: <i id="{{ group.name.replace(' ', '') }}_size">{{ users|length }}</i></h4>
        </div>
        <table class="table">
            <thead class="thead-dark">
            <tr>
                <th> ID #</th>
                <th> Username</th>
                <th> Email</th>
            </tr>
            </thead>
            <tbody>
            {% for student in users %}
            <tr>
                <td> {{ student.id }}</td>
                <td> {{ student.username }}</td>
                <td> {{ student.email }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<table class="table">
    <tbody id="studentRows">
    {% for student in users %}
        <tr id="uid{{ student.id }}">
            <td> {{ student.id }}</td>
            <td> {{ student.username }}</td>
            <td> {{ student.email }}</td>
            <td class="fit"><button class="btn btn-outline-dark selector mr-3" type="button" id="btn{{ student.id }}"></button></td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% if pairs %}
<div class="col-sm-6" id="pairs">
    <div class="card bg-light mb-3">
        <div class="card-header"><b>*Save these pairs somewhere. They will not be available again.</b></div>
        <div class="card-body">
            <button id="copyPairs" class="btn btn-dark" onclick="copy_pairs()"><i class="fa fa-clipboard"></i> Copy to Clipboard</button><p></p>
            <textarea cols="30" rows="{{ pairs|length + 1 }}" id="pairValues" readonly="readonly" style="overflow: auto; resize: none;">{% for pair in pairs %}{{ pair[0] }}: {{ pair[1] }}&#10;{% endfor %}</textarea>
        </div>
    </div>
    <script type="text/javascript">
      function copy_pairs() {
        var pairs = document.getElementById("pairValues");
        pairs.select();
        document.execCommand("copy");
      }
    </script>
</div>
{% endif %}
